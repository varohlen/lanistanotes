---
import { getCollection } from 'astro:content';

const notes = await getCollection('changenotes');
const latestNote = notes.sort((a, b) => b.data.season - a.data.season)[0];

// Redirect to the latest note
Astro.response.status = 302;
Astro.response.headers.set('Location', `/notes/${latestNote.slug}`);
---

<script define:vars={{ slug: latestNote.slug }}>
  // Client-side navigation
  window.location.href = window.location.pathname.replace(/\/?$/, '/') + 'notes/' + slug;
</script>
